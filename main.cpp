#include<parallel_merge.h>
#include <mpi.h>

ALLEGRO_DISPLAY *display=NULL;

int main(int argc, char **argv){
    MPI_Init(&argc, &argv);
    int size;
    int rank;
    int RANK;
    RANK=0;
    MPI_Comm_size(MPI_COMM_WORLD,&size);
    MPI_Comm_rank(MPI_COMM_WORLD,&rank);
    if (rank==0){
        al_init();
        display=al_create_display(SCREEN_WIDTH,SCREEN_HEIGHT);

    }
    int N;
    //N=288;
    //int global_mas[]= {93, 617, 772, 458, 786, 226, 352, 472, 764, 886, 487, 894, 858, 479, 583, 708, 557, 887, 448, 127, 590, 270, 496, 657, 550, 994, 785, 64, 500, 436, 785, 374, 806, 820, 694, 658, 955, 280, 604, 251, 105, 148, 978, 776, 932, 494, 994, 766, 323, 954, 687, 148, 464, 264, 726, 720, 608, 851, 624, 267, 999, 594, 161, 804, 916, 902, 977, 887, 812, 891, 887, 737, 628, 596, 544, 532, 933, 402, 864, 508, 95, 307, 294, 109, 690, 299, 102, 180, 744, 385, 159, 572, 918, 100, 117, 73, 384, 166, 15, 237, 246, 916, 680, 276, 438, 668, 550, 428, 331, 700, 817, 771, 338, 442, 792, 134, 526, 897, 976, 414, 263, 138, 835, 513, 176, 660, 662, 624, 548, 814, 389, 1, 456, 602, 487, 551, 631, 511, 442, 940, 741, 106, 995, 631, 657, 26, 435, 484, 672, 742, 68, 489, 372, 393, 399, 713, 785, 44, 530, 935, 556, 985, 831, 177, 485, 936, 805, 198, 389, 453, 760, 261, 507, 109, 61, 421, 556, 464, 551, 406, 50, 826, 131, 275, 831, 196, 765, 155, 252, 604, 741, 569, 775, 487, 456, 625, 506, 116, 989, 897, 16, 935, 321, 318, 469, 176, 561, 252, 148, 395, 242, 831, 206, 764, 656, 581, 676, 172, 880, 269, 484, 379, 503, 525, 580, 495, 456, 285, 875, 111, 205, 360, 733, 665, 900, 727, 609, 314, 100, 269, 488, 917, 956, 365};
    N=96;
    int global_mas[]={887, 462, 119, 605, 933, 398, 504, 805, 234, 791, 765, 273, 678, 881, 141, 820, 476, 425, 597, 238, 204, 902, 989, 599, 826, 267, 732, 544, 335, 854, 209, 92, 967, 991, 527, 361, 672, 26, 273, 393, 606, 132, 886, 483, 521, 21, 431, 397, 611, 663, 908, 952, 111, 965, 904, 804, 652, 368, 51, 155, 646, 818, 717, 435, 855, 819, 802, 703, 929, 641, 356, 194, 934, 681, 402, 161, 658, 240, 241, 752, 1000, 769, 328, 898, 621, 428, 271, 684, 414, 464, 510, 352};
    //N=rand()%100 * size;
    parallel_merge(RANK, rank,size, N, global_mas);
    return 0;
}
